# ๐ ุฏููู ุงุณุชุฎุฏุงู ูุธุงู ุงูุฏุนูุงุช ุงููุฑุญูู

## ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุฐูู ูุฅุฑุณุงู ุฏุนูุงุช WhatsApp ุนูู ูุฑุญูุชูู:
1. **ุฏุนูุฉ ุนุงูุฉ** โ ุฑุณุงูุฉ ูุตูุฉ ูุฌููุน ุงูุถููู
2. **ุจุทุงูุฉ ุดุฎุตูุฉ** โ ุชุฑุณู ุชููุงุฆูุงู ูููุคูุฏูู ููุท

---

## ๐ ุงูุฎุทูุงุช

### 1๏ธโฃ ุชุทุจูู ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช

ุงูุชุญ **Supabase SQL Editor** ูุดุบูู:

```sql
-- ูุณุฎ ูุญุชูู ุงูููู
supabase/migrations/whatsapp_two_phase.sql
```

**ููุชุญูู:**
```sql
-- ุดุบูู ูุฐุง ููุชุฃูุฏ
supabase/verify-two-phase-migration.sql
```

---

### 2๏ธโฃ ุชุดุบูู WhatsApp Server

```bash
npm run whatsapp:server
```

ูุฌุจ ุฃู ูุนูู ุนูู: `http://localhost:3001`

---

### 3๏ธโฃ ุฑุจุท ุญุณุงุจ WhatsApp

1. ุงูุชุญ ุงููููุน: `http://localhost:5173/whatsapp`
2. ุงุถุบุท "ุฅุถุงูุฉ ุญุณุงุจ"
3. ุงูุณุญ QR Code ูู ูุงุชูู
4. ุงูุชุธุฑ ุญุชู ูุชุตู

---

### 4๏ธโฃ ุฅุฑุณุงู ุงูุฏุนูุงุช ุงูุนุงูุฉ

**ุนุจุฑ API:**
```javascript
fetch('http://localhost:3001/api/whatsapp/prepare-messages', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        eventId: 'YOUR_EVENT_ID',
        messagePhase: 'general',  // โ ููู!
        template: messageTemplates.general.text
    })
});
```

**ุฃู ุนุจุฑ ุงูุณูุฑูุจุช:**
```bash
node scripts/test-two-phase-workflow.js
```

---

### 5๏ธโฃ ุงูุชุธุฑ ุงูุชุฃููุฏุงุช

ุนูุฏูุง ูุฑุฏ ุงูุถูู ุจู:
- โ "ูุนู" ุฃู "ููุงูู" โ ุงููุธุงู ูุฑุณู ุงูุจุทุงูุฉ **ุชููุงุฆูุงู**
- โ "ูุง" ุฃู "ุงุนุชุฐุฑ" โ ูุณุฌู ุงูุฑูุถ
- โณ "ูููู" โ ูุณุฌู "ุฑุจูุง"

---

### 6๏ธโฃ ุชุชุจุน ุงูุญุงูุฉ

**ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
```sql
SELECT * FROM whatsapp_confirmation_status
WHERE event_id = 'YOUR_EVENT_ID';
```

---

## ๐งช ุงุฎุชุจุงุฑ ุณุฑูุน

### ุงูุทุฑููุฉ ุงูุฃููู: ูุฏูู

1. ุฃุฑุณู ุฏุนูุฉ ุนุงูุฉ ูุฑููู
2. ุฑุฏ ูู ูุงุชูู: "ูุนู"
3. ุงูุชุธุฑ 2 ุซุงููุฉ
4. ูุฌุจ ุฃู ุชุณุชูู ุงูุจุทุงูุฉ ุชููุงุฆูุงู

### ุงูุทุฑููุฉ ุงูุซุงููุฉ: ุณูุฑูุจุช

```bash
node scripts/test-two-phase-workflow.js
```

---

## โ๏ธ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุงูุจุทุงูุฉ ูุง ุชุฑุณู ุชููุงุฆูุงู

**ุงูุญููู:**
1. ุชุฃูุฏ ุฃู WhatsApp Server ูุนูู
2. ุชุฃูุฏ ุฃู ุงูุถูู ูู `card_image_url` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ุชุญูู ูู ุงูู logs ูู terminal ุงูู server
4. ุชุฃูุฏ ุฃู ุงูุจุทุงูุฉ ูู ุชุฑุณู ูู ูุจู

### ุงููุดููุฉ: ุงูุฏุนูุฉ ุงูุนุงูุฉ ูููุง ุตูุฑุฉ

**ุงูุญู:**
ุชุฃูุฏ ูู `messagePhase: 'general'` ูู ุงูุทูุจ

---

## โ ูุงุฆูุฉ ุงูุชุญูู

ูุจู ุงูุงุณุชุฎุฏุงู ุงููุนูู:

- [ ] ุชุทุจูู migration ูู Supabase
- [ ] ุชุดุบูู WhatsApp Server
- [ ] ุฑุจุท ุญุณุงุจ WhatsApp ูุงุญุฏ ุนูู ุงูุฃูู
- [ ] ุงุฎุชุจุงุฑ ูุน ุฑูู ุชุฌุฑูุจู
- [ ] ุงูุชุญูู ูู ุงุณุชูุงู ุงูุจุทุงูุฉ ุชููุงุฆูุงู
- [ ] ุงูุชุญูู ูู ุนุฏู ุงูุฅุฑุณุงู ุงูููุฑุฑ
